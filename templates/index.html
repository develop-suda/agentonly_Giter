<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gitå±¥æ­´ã‚¢ãƒ—ãƒª - Giter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* shadcn/ui inspired styles */
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --primary: 222.2 47.4% 11.2%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96.1%;
            --secondary-foreground: 222.2 47.4% 11.2%;
            --muted: 210 40% 96.1%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --border: 214.3 31.8% 91.4%;
            --radius: 0.5rem;
        }

        .dark {
            --background: 222.2 84% 4.9%;
            --foreground: 210 40% 98%;
            --card: 222.2 84% 4.9%;
            --card-foreground: 210 40% 98%;
        }

        * {
            border-color: hsl(var(--border));
        }

        body {
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
        }

        .card {
            background-color: hsl(var(--card));
            color: hsl(var(--card-foreground));
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius);
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
        }

        .btn-primary:hover {
            opacity: 0.9;
        }

        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 9999px;
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 50;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        .dialog-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .dialog-overlay.active {
            display: flex;
        }

        .dialog {
            background-color: hsl(var(--card));
            border-radius: var(--radius);
            padding: 1.5rem;
            max-width: 32rem;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
        }

        .input {
            width: 100%;
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
            padding: 0.5rem 0.75rem;
            background-color: transparent;
        }

        .input:focus {
            outline: none;
            ring: 2px;
            ring-color: hsl(var(--primary));
        }

        .textarea {
            width: 100%;
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
            padding: 0.5rem 0.75rem;
            background-color: transparent;
            min-height: 100px;
        }

        .textarea:focus {
            outline: none;
            ring: 2px;
            ring-color: hsl(var(--primary));
        }

        .loading {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid hsl(var(--primary));
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 0.6s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .commit-card {
            transition: all 0.2s;
        }

        .commit-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200">
        <div class="container mx-auto px-4 py-6">
            <h1 class="text-3xl font-bold text-gray-900">ğŸš€ Giter - Gitå±¥æ­´</h1>
            <p class="text-gray-600 mt-2">develop-suda ã®GitHubå±¥æ­´ã‚’è¡¨ç¤º</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Loading State -->
        <div id="loading" class="flex items-center justify-center py-12">
            <div class="loading"></div>
            <span class="ml-3 text-gray-600">èª­ã¿è¾¼ã¿ä¸­...</span>
        </div>

        <!-- Error State -->
        <div id="error" class="hidden">
            <div class="card p-6 bg-red-50 border-red-200">
                <h3 class="text-red-900 font-semibold text-lg">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h3>
                <p class="text-red-700 mt-2" id="error-message"></p>
            </div>
        </div>

        <!-- Commits Grid -->
        <div id="commits-container" class="hidden">
            <div class="mb-6 flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">ã‚³ãƒŸãƒƒãƒˆå±¥æ­´</h2>
                    <p class="text-gray-600 mt-1">å…¨ <span id="total-commits" class="font-semibold text-primary">0</span> ä»¶</p>
                </div>
            </div>

            <div id="commits-list" class="grid gap-4">
                <!-- Commits will be inserted here -->
            </div>
        </div>
    </main>

    <!-- FAB Button -->
    <button class="fab" title="ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥" onclick="loadCommits()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
        </svg>
    </button>

    <script>
        /**
         * DOMContentLoadedã‚¤ãƒ™ãƒ³ãƒˆ: HTMLã®è§£æãŒå®Œäº†ã—ã€DOMæ§‹é€ ãŒåˆ©ç”¨å¯èƒ½ã«ãªã£ãŸæ™‚ç‚¹ã§ç™ºç«
         * ç”»åƒã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®èª­ã¿è¾¼ã¿ã‚’å¾…ãŸãšã«å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€åˆæœŸè¡¨ç¤ºãŒé€Ÿã„
         * ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«è‡ªå‹•çš„ã«ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã‚’å–å¾—ã™ã‚‹
         */
        window.addEventListener('DOMContentLoaded', () => {
            loadCommits();
        });

        /**
         * loadCommits - Gitå±¥æ­´ã‚’APIã‹ã‚‰å–å¾—ã—ã€ç”»é¢ã«è¡¨ç¤ºã™ã‚‹éåŒæœŸé–¢æ•°
         *
         * å‡¦ç†ã®æµã‚Œ:
         * 1. UIã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºï¼‰
         * 2. /api/git-history ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
         * 3. å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ–°ã—ã„é †ã«ã‚½ãƒ¼ãƒˆ
         * 4. å„ã‚³ãƒŸãƒƒãƒˆã®ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦è¡¨ç¤º
         * 5. ã‚¨ãƒ©ãƒ¼æ™‚ã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
         *
         * ä½¿ç”¨ã™ã‚‹DOMè¦ç´ :
         * - loading: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
         * - error: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢
         * - container: ã‚³ãƒŸãƒƒãƒˆä¸€è¦§ã‚³ãƒ³ãƒ†ãƒŠ
         * - commitsList: å€‹åˆ¥ã®ã‚³ãƒŸãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚’æ ¼ç´ã™ã‚‹è¦ç´ 
         */
        async function loadCommits() {
            // DOMè¦ç´ ã®å–å¾—
            // getElementById()ã§HTMLå†…ã®ç‰¹å®šã®idå±æ€§ã‚’æŒã¤è¦ç´ ã‚’å–å¾—
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const container = document.getElementById('commits-container');
            const commitsList = document.getElementById('commits-list');

            // UIã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆåˆæœŸçŠ¶æ…‹ã«æˆ»ã™ï¼‰
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡¨ç¤ºã—ã€ã‚¨ãƒ©ãƒ¼ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤ºã«ã™ã‚‹
            loading.classList.remove('hidden');  // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            error.classList.add('hidden');       // ã‚¨ãƒ©ãƒ¼ã‚’éè¡¨ç¤º
            container.classList.add('hidden');   // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤º
            commitsList.innerHTML = '';          // æ—¢å­˜ã®ã‚³ãƒŸãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚’ã™ã¹ã¦å‰Šé™¤

            try {
                // Fetch APIã‚’ä½¿ç”¨ã—ã¦ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«HTTP GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
                // await: éåŒæœŸå‡¦ç†ã®å®Œäº†ã‚’å¾…ã¤ï¼ˆPromiseãŒresolveã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿï¼‰
                const response = await fetch('/api/git-history');

                // HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯
                // response.ok ã¯ status ãŒ 200-299 ã®ç¯„å›²å†…ã®å ´åˆã« true
                if (!response.ok) {
                    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãŒ200ç•ªå°ä»¥å¤–ã®å ´åˆã€ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã‚’JSONå½¢å¼ã§ãƒ‘ãƒ¼ã‚¹
                // await: JSONãƒ‘ãƒ¼ã‚¹å‡¦ç†ã®å®Œäº†ã‚’å¾…ã¤
                const commits = await response.json();

                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’éè¡¨ç¤ºã«ã—ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
                loading.classList.add('hidden');
                container.classList.remove('hidden');

                // ç·ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’ç”»é¢ã«è¡¨ç¤º
                // textContent: XSSæ”»æ’ƒã‚’é˜²ããŸã‚ã€ãƒ†ã‚­ã‚¹ãƒˆã®ã¿ã‚’è¨­å®šï¼ˆHTMLã‚¿ã‚°ã¯ç„¡åŠ¹åŒ–ï¼‰
                document.getElementById('total-commits').textContent = commits.length;

                // ã‚³ãƒŸãƒƒãƒˆã‚’æ™‚é–“ã®æ–°ã—ã„é †ã«ã‚½ãƒ¼ãƒˆ
                // sort()ã¯é…åˆ—ã‚’ç ´å£Šçš„ã«å¤‰æ›´ï¼ˆå…ƒã®é…åˆ—ãŒæ›¸ãæ›ãˆã‚‰ã‚Œã‚‹ï¼‰
                // æ¯”è¼ƒé–¢æ•°: è² ã®å€¤ã‚’è¿”ã™ã¨aãŒå‰ã€æ­£ã®å€¤ã‚’è¿”ã™ã¨bãŒå‰ã«é…ç½®
                commits.sort((a, b) => new Date(b.commit_time) - new Date(a.commit_time));

                // å„ã‚³ãƒŸãƒƒãƒˆã«å¯¾ã—ã¦ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã€DOMã«è¿½åŠ 
                // forEach: é…åˆ—ã®å„è¦ç´ ã«å¯¾ã—ã¦é–¢æ•°ã‚’å®Ÿè¡Œ
                commits.forEach(commit => {
                    const card = createCommitCard(commit);  // ã‚³ãƒŸãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®DOMè¦ç´ ã‚’ç”Ÿæˆ
                    commitsList.appendChild(card);          // DOMãƒ„ãƒªãƒ¼ã«è¿½åŠ ï¼ˆç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
                });

            } catch (err) {
                // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã®å‡¦ç†
                // try ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ throw ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ã€ã¾ãŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãªã©ã‚’ã‚­ãƒ£ãƒƒãƒ
                console.error('Error loading commits:', err);  // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’å‡ºåŠ›
                loading.classList.add('hidden');               // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’éè¡¨ç¤º
                error.classList.remove('hidden');              // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                document.getElementById('error-message').textContent = err.message;  // ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’è¡¨ç¤º
            }
        }

        /**
         * createCommitCard - å€‹åˆ¥ã®ã‚³ãƒŸãƒƒãƒˆæƒ…å ±ã‹ã‚‰HTMLã‚«ãƒ¼ãƒ‰è¦ç´ ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
         *
         * @param {Object} commit - ã‚³ãƒŸãƒƒãƒˆæƒ…å ±ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
         * @param {string} commit.repository_name - ãƒªãƒã‚¸ãƒˆãƒªå
         * @param {string} commit.commit_sha - ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ï¼ˆçŸ­ç¸®å½¢ï¼‰
         * @param {string} commit.commit_message - ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
         * @param {string} commit.commit_time - ã‚³ãƒŸãƒƒãƒˆæ—¥æ™‚ï¼ˆISO 8601å½¢å¼ï¼‰
         * @param {string} commit.commit_url - GitHubã®ã‚³ãƒŸãƒƒãƒˆãƒšãƒ¼ã‚¸URL
         *
         * @returns {HTMLDivElement} ç”Ÿæˆã•ã‚ŒãŸã‚«ãƒ¼ãƒ‰è¦ç´ 
         *
         * å‡¦ç†:
         * 1. æ—¥æ™‚ã‚’æ—¥æœ¬èªãƒ­ã‚±ãƒ¼ãƒ«ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
         * 2. ã‚«ãƒ¼ãƒ‰ç”¨ã®divè¦ç´ ã‚’ä½œæˆ
         * 3. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã§HTMLã‚’ç”Ÿæˆ
         * 4. XSSå¯¾ç­–ã¨ã—ã¦escapeHtml()é–¢æ•°ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
         */
        function createCommitCard(commit) {
            // æ–°ã—ã„divè¦ç´ ã‚’ä½œæˆ
            const card = document.createElement('div');
            // Tailwind CSSã®ã‚¯ãƒ©ã‚¹ã‚’è¨­å®šï¼ˆã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ï¼‰
            card.className = 'card p-5 commit-card cursor-pointer';

            // ISO 8601å½¢å¼ã®æ—¥æ™‚æ–‡å­—åˆ—ã‚’Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
            const date = new Date(commit.commit_time);

            // æ—¥æœ¬èªãƒ­ã‚±ãƒ¼ãƒ«ã§æ—¥æ™‚ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
            // toLocaleString(): ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ã‚±ãƒ¼ãƒ«è¨­å®šã«åŸºã¥ã„ã¦æ—¥æ™‚æ–‡å­—åˆ—ã‚’ç”Ÿæˆ
            const formattedDate = date.toLocaleString('ja-JP', {
                year: 'numeric',    // å¹´ã‚’æ•°å€¤ã§è¡¨ç¤º
                month: '2-digit',   // æœˆã‚’2æ¡ã§è¡¨ç¤ºï¼ˆ01-12ï¼‰
                day: '2-digit',     // æ—¥ã‚’2æ¡ã§è¡¨ç¤ºï¼ˆ01-31ï¼‰
                hour: '2-digit',    // æ™‚ã‚’2æ¡ã§è¡¨ç¤ºï¼ˆ00-23ï¼‰
                minute: '2-digit'   // åˆ†ã‚’2æ¡ã§è¡¨ç¤ºï¼ˆ00-59ï¼‰
            });

            // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã§HTMLã‚’ç”Ÿæˆ
            // ãƒãƒƒã‚¯ã‚¯ã‚©ãƒ¼ãƒˆ(``)å†…ã§${å¤‰æ•°}ã‚’ä½¿ç”¨ã™ã‚‹ã¨å€¤ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã‚‹
            // escapeHtml()ã§XSSæ”»æ’ƒã‚’é˜²ãï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’ãã®ã¾ã¾è¡¨ç¤ºã—ãªã„ï¼‰
            card.innerHTML = `
                <div class="flex items-start justify-between gap-4">
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center gap-3 mb-2">
                            <!-- ãƒªãƒã‚¸ãƒˆãƒªåã®ãƒãƒƒã‚¸ -->
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                ${escapeHtml(commit.repository_name)}
                            </span>
                            <!-- ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ï¼ˆçŸ­ç¸®å½¢ï¼‰ã®ãƒãƒƒã‚¸ -->
                            <span class="inline-flex items-center px-2 py-1 rounded text-xs font-mono bg-gray-100 text-gray-700">
                                ${escapeHtml(commit.commit_sha)}
                            </span>
                        </div>
                        <!-- ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰ -->
                        <h3 class="text-base font-semibold text-gray-900 mb-2 truncate">
                            ${escapeHtml(commit.commit_message)}
                        </h3>
                        <div class="flex items-center gap-4 text-sm text-gray-600">
                            <!-- æ™‚è¨ˆã‚¢ã‚¤ã‚³ãƒ³ã¨ã‚³ãƒŸãƒƒãƒˆæ—¥æ™‚ -->
                            <span class="flex items-center gap-1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                ${formattedDate}
                            </span>
                        </div>
                    </div>
                    <!-- GitHubã¸ã®ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ -->
                    <!-- target="_blank": æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã -->
                    <!-- rel="noopener noreferrer": ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ï¼ˆwindow.openerã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ãï¼‰ -->
                    <a href="${escapeHtml(commit.commit_url)}" target="_blank" rel="noopener noreferrer"
                       class="btn btn-primary px-4 py-2 text-sm flex items-center gap-2">
                        GitHubã§è¦‹ã‚‹
                        <!-- å¤–éƒ¨ãƒªãƒ³ã‚¯ã‚¢ã‚¤ã‚³ãƒ³ -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                            <polyline points="15 3 21 3 21 9"/>
                            <line x1="10" y1="14" x2="21" y2="3"/>
                        </svg>
                    </a>
                </div>
            `;

            // ç”Ÿæˆã—ãŸã‚«ãƒ¼ãƒ‰è¦ç´ ã‚’è¿”ã™
            return card;
        }

        /**
         * escapeHtml - XSSæ”»æ’ƒã‚’é˜²ããŸã‚ã«HTMLã®ç‰¹æ®Šæ–‡å­—ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹é–¢æ•°
         *
         * @param {string} text - ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹æ–‡å­—åˆ—
         * @returns {string} ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚ŒãŸæ–‡å­—åˆ—
         *
         * å‡¦ç†å†…å®¹:
         * - HTMLã§ç‰¹åˆ¥ãªæ„å‘³ã‚’æŒã¤æ–‡å­—ã‚’HTMLã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«å¤‰æ›
         * - ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°ãªã©ãŒå«ã¾ã‚Œã¦ã„ã¦ã‚‚å®Ÿè¡Œã•ã‚Œãªã„
         *
         * å¤‰æ›å¯¾è±¡æ–‡å­—:
         * - & â†’ &amp;   (ã‚¢ãƒ³ãƒ‘ã‚µãƒ³ãƒ‰: ä»–ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®é–‹å§‹æ–‡å­—ãªã®ã§æœ€åˆã«å¤‰æ›)
         * - < â†’ &lt;    (å°ãªã‚Š: ã‚¿ã‚°ã®é–‹å§‹ã‚’ç¤ºã™)
         * - > â†’ &gt;    (å¤§ãªã‚Š: ã‚¿ã‚°ã®çµ‚äº†ã‚’ç¤ºã™)
         * - " â†’ &quot;  (ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆ: å±æ€§å€¤ã®åŒºåˆ‡ã‚Š)
         * - ' â†’ &#039;  (ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆ: å±æ€§å€¤ã®åŒºåˆ‡ã‚Š)
         *
         * ä¾‹:
         * input:  '<script>alert("XSS")</script>'
         * output: '&lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt;'
         */
        function escapeHtml(text) {
            // ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ãƒãƒƒãƒ—: ç‰¹æ®Šæ–‡å­— â†’ HTMLã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
            const map = {
                '&': '&amp;',   // ã‚¢ãƒ³ãƒ‘ã‚µãƒ³ãƒ‰
                '<': '&lt;',    // å°ãªã‚Šè¨˜å·
                '>': '&gt;',    // å¤§ãªã‚Šè¨˜å·
                '"': '&quot;',  // ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆ
                "'": '&#039;'   // ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆ
            };

            // æ­£è¦è¡¨ç¾ã§ç‰¹æ®Šæ–‡å­—ã‚’æ¤œç´¢ã—ã€ãƒãƒƒãƒ—ã®å€¤ã§ç½®æ›
            // /[&<>"']/g: 5ã¤ã®ç‰¹æ®Šæ–‡å­—ã®ã„ãšã‚Œã‹ã«ãƒãƒƒãƒï¼ˆgãƒ•ãƒ©ã‚°ã§å…¨ç½®æ›ï¼‰
            // m => map[m]: ãƒãƒƒãƒã—ãŸæ–‡å­—ã‚’ã‚­ãƒ¼ã¨ã—ã¦ãƒãƒƒãƒ—ã‹ã‚‰å¯¾å¿œã™ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å–å¾—
            return text.replace(/[&<>"']/g, m => map[m]);
        }
    </script>
</body>
</html>
