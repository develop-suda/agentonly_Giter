# 開発環境用Dockerfile（ホットリロード対応）
FROM golang:1.21-alpine

# 作業ディレクトリを設定
WORKDIR /app

# 必要なパッケージをインストール
RUN apk --no-cache add ca-certificates tzdata git

# Air（ホットリロードツール）をインストール
RUN go install github.com/cosmtrek/air@latest

# タイムゾーンを設定
ENV TZ=Asia/Tokyo

# すべてのソースコードをコピー
COPY . .

# 依存関係を整理してダウンロード
RUN go mod tidy && go mod download

# ポートを公開
EXPOSE 8080

# Airを使用してホットリロード
CMD ["air", "-c", ".air.toml"]
